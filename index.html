<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClimatScope ‚Äì La Complexit√© du Syst√®me Climatique</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --text: #1f2937;
            --text-light: #4b5563;
            --bg: #f3f4f6;
            --card: #ffffff;
        }
        /* Mode sombre natif */
        @media (prefers-color-scheme: dark) {
            :root {
                --text: #f9fafb;
                --text-light: #d1d5db;
                --bg: #111827;
                --card: #1f2937;
            }
        }
        body {
            font-family: 'Inter', system-ui, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.6;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .chart-container {
            position: relative;
            width: 100%;
            height: clamp(250px, 50vh, 380px);
            max-width: 620px;
            margin: 0 auto;
        }
        @media (prefers-reduced-motion: reduce) {
            * { transition: none !important; animation: none !important; }
        }
        .feedback-step {
            transition: all 0.3s ease;
        }
        .feedback-arrow {
            font-size: 1.4rem;
            color: #9ca3af;
        }
        button[role="button"] {
            cursor: pointer;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col antialiased dark:bg-gray-900 dark:text-gray-100">

    <a href="#main" class="sr-only focus:not-sr-only fixed top-4 left-4 bg-white dark:bg-gray-800 px-4 py-2 rounded shadow z-50 focus:ring-2 focus:ring-blue-500">Aller au contenu principal</a>

    <header class="bg-white dark:bg-gray-800 shadow-sm sticky top-0 z-50 border-b dark:border-gray-700">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <h1 class="text-xl sm:text-2xl font-bold tracking-tight">
                Climat<span class="text-blue-600 dark:text-blue-400">Scope</span>
            </h1>
            <nav class="hidden md:flex space-x-8 text-sm font-medium">
                <a href="#definitions" class="hover:text-blue-600 dark:hover:text-blue-400 transition">M√©t√©o vs Climat</a>
                <a href="#forcage" class="hover:text-red-600 dark:hover:text-red-400 transition">For√ßage radiatif</a>
                <a href="#oceans" class="hover:text-blue-600 dark:hover:text-blue-400 transition">R√¥le des oc√©ans</a>
                <a href="#retroactions" class="hover:text-green-600 dark:hover:text-green-400 transition">R√©troactions</a>
            </nav>
            <button id="mobile-menu-btn" aria-label="Ouvrir le menu" class="md:hidden text-2xl text-gray-600 dark:text-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded">
                ‚ò∞
            </button>
        </div>
        <div id="mobile-menu" class="hidden md:hidden bg-white dark:bg-gray-800 border-t dark:border-gray-700 px-4 py-5 space-y-4 shadow-lg">
            <a href="#definitions" class="block text-gray-700 dark:text-gray-200 hover:text-blue-600">M√©t√©o vs Climat</a>
            <a href="#forcage" class="block text-gray-700 dark:text-gray-200 hover:text-red-600">For√ßage radiatif</a>
            <a href="#oceans" class="block text-gray-700 dark:text-gray-200 hover:text-blue-600">R√¥le des oc√©ans</a>
            <a href="#retroactions" class="block text-gray-700 dark:text-gray-200 hover:text-green-600">R√©troactions</a>
        </div>
    </header>

    <main id="main" class="flex-grow">

        <section class="bg-gradient-to-b from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 pt-12 pb-16 border-b dark:border-gray-700">
            <div class="max-w-5xl mx-auto px-5 text-center">
                <h2 class="text-3xl sm:text-5xl font-extrabold text-gray-900 dark:text-white mb-5">
                    La Complexit√© du Syst√®me Climatique
                </h2>
                <p class="text-lg sm:text-xl text-gray-600 dark:text-gray-300 max-w-3xl mx-auto leading-relaxed">
                    Comprendre comment l‚Äôatmosph√®re, les oc√©ans, les glaces et la biosph√®re interagissent pour expliquer le r√©chauffement actuel.
                </p>
                <div class="mt-8 flex flex-wrap justify-center gap-3">
                    <span class="px-4 py-1.5 rounded-full text-xs sm:text-sm font-medium bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-100">Th√®me 1 ‚Äì Chapitre 2</span>
                    <span class="px-4 py-1.5 rounded-full text-xs sm:text-sm font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200">Enseignement Scientifique</span>
                </div>
            </div>
        </section>

        <section id="definitions" class="py-12 sm:py-20 bg-gray-50 dark:bg-gray-950">
            <div class="max-w-5xl mx-auto px-5">
                <div class="text-center mb-10 sm:mb-12">
                    <h3 class="text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white mb-4">1. M√©t√©orologie vs Climatologie</h3>
                    <p class="text-md sm:text-lg text-gray-600 dark:text-gray-400 max-w-3xl mx-auto">
                        Deux sciences diff√©rentes par leurs √©chelles de temps et d‚Äôespace.
                    </p>
                </div>

                <div class="grid md:grid-cols-2 gap-6 sm:gap-8 max-w-4xl mx-auto">
                    <button 
                        role="button" 
                        aria-expanded="false" 
                        aria-controls="meteo-details"
                        class="bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-all group text-left focus:outline-none focus:ring-2 focus:ring-yellow-400"
                        onclick="toggleCard('meteo-details', this)">
                        <div class="p-6 sm:p-7 border-l-8 border-yellow-500">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="text-xl sm:text-2xl font-bold text-gray-800 dark:text-white">M√©t√©orologie</h4>
                                <span class="text-3xl sm:text-4xl">‚òÄÔ∏è</span>
                            </div>
                            <p class="text-gray-600 dark:text-gray-300 mb-3">L‚Äô√©tude du temps qu‚Äôil fait au jour le jour.</p>
                            <div id="meteo-details" class="hidden space-y-3 text-sm text-gray-700 dark:text-gray-400">
                                <div class="flex items-start"><span class="mr-3 text-yellow-600 text-lg">‚è±</span><span><strong>Court terme</strong> : heures, jours, semaines</span></div>
                                <div class="flex items-start"><span class="mr-3 text-yellow-600 text-lg">üìç</span><span>√âchelle locale / r√©gionale</span></div>
                                <div class="flex items-start"><span class="mr-3 text-yellow-600 text-lg">üéØ</span><span>Pr√©visions (pluie, vent, orages‚Ä¶)</span></div>
                            </div>
                        </div>
                    </button>

                    <button 
                        role="button" 
                        aria-expanded="false" 
                        aria-controls="climat-details"
                        class="bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-all group text-left focus:outline-none focus:ring-2 focus:ring-blue-400"
                        onclick="toggleCard('climat-details', this)">
                        <div class="p-6 sm:p-7 border-l-8 border-blue-600">
                            <div class="flex items-center justify-between mb-4">
                                <h4 class="text-xl sm:text-2xl font-bold text-gray-800 dark:text-white">Climatologie</h4>
                                <span class="text-3xl sm:text-4xl">üåç</span>
                            </div>
                            <p class="text-gray-600 dark:text-gray-300 mb-3">L‚Äô√©tude des moyennes et tendances sur des d√©cennies.</p>
                            <div id="climat-details" class="hidden space-y-3 text-sm text-gray-700 dark:text-gray-400">
                                <div class="flex items-start"><span class="mr-3 text-blue-600 text-lg">‚è≥</span><span><strong>Long terme</strong> : 30 ans minimum, si√®cles</span></div>
                                <div class="flex items-start"><span class="mr-3 text-blue-600 text-lg">üåê</span><span>√âchelle globale ou continentale</span></div>
                                <div class="flex items-start"><span class="mr-3 text-blue-600 text-lg">üìä</span><span>Temp√©rature moyenne, niveau des mers, banquise</span></div>
                            </div>
                        </div>
                    </button>
                </div>
            </div>
        </section>

        <section id="forcage" class="py-12 sm:py-20 bg-white dark:bg-gray-900">
            <div class="max-w-6xl mx-auto px-5">
                <div class="grid lg:grid-cols-2 gap-10 lg:gap-12 items-center">
                    <div>
                        <h3 class="text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white mb-6">2. Le moteur du climat</h3>
                        <div class="prose prose-lg text-gray-700 dark:text-gray-300 max-w-none">
                            <p>Le climat d√©pend de l‚Äô√©quilibre entre :</p>
                            <ul class="list-disc pl-6 space-y-2 mt-4">
                                <li>√©nergie re√ßue du Soleil (~342 W/m¬≤ en moyenne)</li>
                                <li>√©nergie renvoy√©e vers l‚Äôespace (rayonnement infrarouge)</li>
                            </ul>
                            <p class="font-semibold mt-6 text-red-600 dark:text-red-400">Quand cet √©quilibre est rompu ‚Üí for√ßage radiatif positif ‚Üí r√©chauffement.</p>
                        </div>

                        <div class="mt-8 bg-gray-50 dark:bg-gray-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm">
                            <label for="ghg-slider" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 text-center sm:text-left">
                                Augmentation des gaz √† effet de serre
                            </label>
                            <input type="range" id="ghg-slider" min="0" max="100" value="15" step="1" class="w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg cursor-pointer accent-red-500">
                            <div class="flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-2 px-1">
                                <span>1750</span>
                                <span>2025</span>
                                <span>2100 ?</span>
                            </div>
                            <div class="mt-6 text-center">
                                <p id="forcing-value" class="text-2xl font-bold text-gray-800 dark:text-white">‚âà +0.6 W/m¬≤</p>
                                <p id="forcing-status" class="text-lg font-medium text-green-600 dark:text-green-400 mt-1">√âquilibre ‚âà stable</p>
                            </div>
                        </div>
                    </div>

                    <div class="bg-gradient-to-b from-gray-900 to-black rounded-2xl p-6 sm:p-8 shadow-2xl relative overflow-hidden aspect-[4/3] max-w-[580px] mx-auto w-full">
                        <div class="absolute inset-0 opacity-10 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] pointer-events-none"></div>
                        
                        <div class="relative z-10 h-full flex flex-col justify-center items-center gap-6 sm:gap-10">
                            <div class="text-center text-white">
                                <div class="text-yellow-300 text-lg sm:text-2xl font-bold mb-1">√ânergie solaire re√ßue</div>
                                <div class="text-4xl sm:text-5xl font-black text-yellow-400 drop-shadow-lg">342 W/m¬≤</div>
                            </div>

                            <div class="w-16 sm:w-24 h-48 sm:h-64 bg-gradient-to-t from-red-700 via-red-500 to-red-300 rounded-t-2xl relative shadow-2xl transition-all duration-500" id="output-bar">
                                <div id="trapped-heat" class="absolute bottom-0 left-0 w-full bg-red-900/60 transition-all duration-500 rounded-t-2xl" style="height: 8%"></div>
                            </div>

                            <div class="text-center text-white">
                                <div class="text-red-300 text-lg sm:text-xl font-bold mb-1">Infrarouge √©mis</div>
                                <div id="output-value" class="text-3xl sm:text-4xl font-black">‚âà 342 W/m¬≤</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="oceans" class="py-12 sm:py-20 bg-blue-50/70 dark:bg-gray-950">
            <div class="max-w-5xl mx-auto px-5">
                <div class="text-center mb-10 sm:mb-12">
                    <h3 class="text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white mb-4">3. O√π va l‚Äôexc√®s de chaleur ?</h3>
                    <p class="text-md sm:text-lg text-gray-600 dark:text-gray-400">Plus de 90 % de l‚Äô√©nergie suppl√©mentaire est absorb√©e par les oc√©ans.</p>
                </div>

                <div class="grid md:grid-cols-2 gap-8 lg:gap-10 items-center">
                    <div class="bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-2xl shadow-xl">
                        <div class="chart-container">
                            <canvas id="energyChart"></canvas>
                        </div>
                        <p class="text-center text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-4">R√©partition du stockage de chaleur (1971‚Äì2020)</p>
                    </div>

                    <div class="space-y-6 sm:space-y-8">
                        <div class="bg-white dark:bg-gray-800 p-6 sm:p-7 rounded-xl shadow-sm border-l-4 border-blue-600">
                            <h4 class="text-xl sm:text-2xl font-bold text-gray-800 dark:text-white mb-3">L‚Äôamortisseur thermique</h4>
                            <p class="text-gray-700 dark:text-gray-300 text-md sm:text-lg leading-relaxed">
                                <strong class="text-blue-700 dark:text-blue-400">‚âà 93 %</strong> de l‚Äôexc√®s d‚Äô√©nergie est stock√© dans l‚Äôoc√©an gr√¢ce √† sa tr√®s grande capacit√© thermique.
                            </p>
                        </div>

                        <div class="bg-white dark:bg-gray-800 p-6 sm:p-7 rounded-xl shadow-sm border-l-4 border-red-500">
                            <h4 class="text-xl sm:text-2xl font-bold text-gray-800 dark:text-white mb-3">Cons√©quences</h4>
                            <ul class="space-y-4 text-gray-700 dark:text-gray-300">
                                <li class="flex items-start">
                                    <span class="flex-shrink-0 w-8 h-8 rounded-full bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-200 font-bold flex items-center justify-center mr-4">1</span>
                                    <span><strong>Dilatation thermique</strong> : l‚Äôeau se dilate quand elle se r√©chauffe</span>
                                </li>
                                <li class="flex items-start">
                                    <span class="flex-shrink-0 w-8 h-8 rounded-full bg-red-100 dark:bg-red-900 text-red-600 dark:text-red-200 font-bold flex items-center justify-center mr-4">2</span>
                                    <span><strong>Fonte des glaces continentales</strong> (Groenland, glaciers)</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="retroactions" class="py-12 sm:py-20 bg-white dark:bg-gray-900">
            <div class="max-w-6xl mx-auto px-5">
                <h3 class="text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white text-center mb-6">4. Les r√©troactions climatiques</h3>
                <p class="text-center text-md sm:text-lg text-gray-600 dark:text-gray-400 mb-10 sm:mb-12 max-w-3xl mx-auto">
                    Processus qui amplifient (positives) ou ralentissent (n√©gatives) le r√©chauffement.
                </p>

                <div class="grid md:grid-cols-3 gap-6 sm:gap-8">
                    <div class="bg-gray-50 dark:bg-gray-800 rounded-2xl p-6 shadow-md hover:shadow-lg transition border dark:border-gray-700">
                        <div class="flex justify-between items-center mb-5">
                            <h4 class="text-lg sm:text-xl font-bold text-gray-800 dark:text-white">Alb√©do</h4>
                            <span class="px-3 py-1 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-200 text-xs font-semibold rounded-full">Positive</span>
                        </div>
                        <div id="albedo-flow" class="space-y-4 text-center">
                            <div class="feedback-step bg-white dark:bg-gray-700 p-4 rounded-lg border border-red-200 dark:border-red-900 shadow-sm text-sm">Temp√©rature ‚Üë</div>
                            <div class="feedback-arrow hidden" data-step="1">‚Üì</div>
                            <div class="feedback-step hidden bg-white dark:bg-gray-700 p-4 rounded-lg border dark:border-gray-600 text-sm" data-step="1">Fonte glaces / neige üßä</div>
                            <div class="feedback-arrow hidden" data-step="2">‚Üì</div>
                            <div class="feedback-step hidden bg-white dark:bg-gray-700 p-4 rounded-lg border dark:border-gray-600 text-sm" data-step="2">Surface sombre ‚Üí alb√©do ‚Üì</div>
                            <div class="feedback-arrow hidden" data-step="3">‚Üì</div>
                            <div class="feedback-step hidden bg-white dark:bg-gray-700 p-4 rounded-lg border border-red-300 dark:border-red-800 shadow-md text-sm font-bold" data-step="3">R√©chauffement amplifi√© ‚Üë</div>
                        </div>
                        <div class="mt-6 flex gap-2 justify-center">
                            <button onclick="nextFeedback('albedo')" class="px-4 py-2 bg-blue-600 text-white rounded-lg text-sm">Suivant</button>
                            <button onclick="resetFeedback('albedo')" class="px-4 py-2 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg text-sm">Reset</button>
                        </div>
                    </div>

                    <div class="bg-gray-50 dark:bg-gray-800 rounded-2xl p-6 shadow-md hover:shadow-lg transition border dark:border-gray-700">
                        <div class="flex justify-between items-center mb-5">
                            <h4 class="text-lg sm:text-xl font-bold text-gray-800 dark:text-white">Perg√©lisol</h4>
                            <span class="px-3 py-1 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-200 text-xs font-semibold rounded-full">Positive</span>
                        </div>
                        <div id="permafrost-flow" class="space-y-4 text-center">
                            <div class="feedback-step bg-white dark:bg-gray-700 p-4 rounded-lg border border-red-200 dark:border-red-900 shadow-sm text-sm">Temp√©rature ‚Üë</div>
                            <div class="feedback-arrow hidden" data-step="1">‚Üì</div>
                            <div class="feedback-step hidden bg-white dark:bg-gray-700 p-4 rounded-lg border dark:border-gray-600 text-sm" data-step="1">D√©gel du perg√©lisol üå°Ô∏è</div>
                            <div class="feedback-arrow hidden" data-step="2">‚Üì</div>
                            <div class="feedback-step hidden bg-white dark:bg-gray-700 p-4 rounded-lg border dark:border-gray-600 text-sm" data-step="2">Lib√©ration CO‚ÇÇ + CH‚ÇÑ</div>
                            <div class="feedback-arrow hidden" data-step="3">‚Üì</div>
                            <div class="feedback-step hidden bg-white dark:bg-gray-700 p-4 rounded-lg border border-red-300 dark:border-red-800 shadow-md text-sm font-bold" data-step="3">Effet de serre renforc√©</div>
                        </div>
                        <div class="mt-6 flex gap-2 justify-center">
                            <button onclick="nextFeedback('permafrost')" class="px-4 py-2 bg-blue-600 text-white rounded-lg text-sm">Suivant</button>
                            <button onclick="resetFeedback('permafrost')" class="px-4 py-2 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg text-sm">Reset</button>
                        </div>
                    </div>

                    <div class="bg-gray-50 dark:bg-gray-800 rounded-2xl p-6 shadow-md hover:shadow-lg transition border dark:border-gray-700">
                        <div class="flex justify-between items-center mb-5">
                            <h4 class="text-lg sm:text-xl font-bold text-gray-800 dark:text-white">V√©g√©tation</h4>
                            <span class="px-3 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-200 text-xs font-semibold rounded-full">N√©gative</span>
                        </div>
                        <div id="vegetation-flow" class="space-y-4 text-center">
                            <div class="feedback-step bg-white dark:bg-gray-700 p-4 rounded-lg border border-green-200 dark:border-green-900 shadow-sm text-sm">CO‚ÇÇ atmosph√©rique ‚Üë</div>
                            <div class="feedback-arrow hidden" data-step="1">‚Üì</div>
                            <div class="feedback-step hidden bg-white dark:bg-gray-700 p-4 rounded-lg border dark:border-gray-600 text-sm" data-step="1">Croissance acc√©l√©r√©e üå±</div>
                            <div class="feedback-arrow hidden" data-step="2">‚Üì</div>
                            <div class="feedback-step hidden bg-white dark:bg-gray-700 p-4 rounded-lg border border-green-300 dark:border-green-800 shadow-md text-sm font-bold" data-step="2">R√©chauffement att√©nu√©</div>
                        </div>
                        <div class="mt-6 flex gap-2 justify-center">
                            <button onclick="nextFeedback('vegetation')" class="px-4 py-2 bg-blue-600 text-white rounded-lg text-sm">Suivant</button>
                            <button onclick="resetFeedback('vegetation')" class="px-4 py-2 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg text-sm">Reset</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-gray-800 dark:bg-black text-gray-300 py-10 mt-auto">
        <div class="max-w-5xl mx-auto px-5 text-center text-sm">
            <p>R√©visions ENS Luca</p>
            <p class="mt-3 text-gray-500">2025 - R√©alis√© pour un usage √©ducatif ‚Äì non commercial</p>
        </div>
    </footer>

    <script>
        // Menu mobile
        document.getElementById('mobile-menu-btn').addEventListener('click', () => {
            document.getElementById('mobile-menu').classList.toggle('hidden');
        });

        // Fermer le menu mobile lors d'un clic sur un lien
        document.querySelectorAll('#mobile-menu a').forEach(link => {
            link.addEventListener('click', () => {
                document.getElementById('mobile-menu').classList.add('hidden');
            });
        });

        // Toggle cartes
        function toggleCard(id, button) {
            const el = document.getElementById(id);
            const isHidden = el.classList.toggle('hidden');
            button.setAttribute('aria-expanded', !isHidden);
        }

        // Graphique r√©partition chaleur
        document.addEventListener('DOMContentLoaded', () => {
            const isDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            const chart = new Chart(document.getElementById('energyChart'), {
                type: 'doughnut',
                data: {
                    labels: ['Oc√©ans', 'Glaces', 'Continents', 'Atmosph√®re'],
                    datasets: [{
                        data: [93, 3, 3, 1],
                        backgroundColor: ['#3b82f6', '#93c5fd', '#d97706', '#9ca3af'],
                        borderWidth: 0,
                        hoverOffset: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { 
                            position: 'bottom', 
                            labels: { 
                                color: isDark ? '#e5e7eb' : '#374151',
                                font: { size: 12 } 
                            } 
                        },
                        tooltip: { callbacks: { label: ctx => `${ctx.label} : ${ctx.raw}%` } }
                    },
                    cutout: '62%'
                }
            });

            // Slider for√ßage radiatif
            const slider = document.getElementById('ghg-slider');
            const valueEl = document.getElementById('forcing-value');
            const statusEl = document.getElementById('forcing-status');
            const trappedEl = document.getElementById('trapped-heat');
            const outputVal = document.getElementById('output-value');

            const forcingLevels = [0, 0.6, 1.1, 1.8, 2.5, 3.2, 4.0];
            const statusTexts = [
                ["√âquilibre ‚âà stable", "text-green-600 dark:text-green-400"],
                ["For√ßage faible (+)", "text-emerald-600 dark:text-emerald-400"],
                ["For√ßage mod√©r√© (+)", "text-amber-600 dark:text-amber-400"],
                ["For√ßage significatif (+)", "text-orange-600 dark:text-orange-400"],
                ["For√ßage fort (+)", "text-red-600 dark:text-red-400"],
                ["For√ßage tr√®s fort (+)", "text-red-700 dark:text-red-500 font-bold"],
                ["Sc√©nario extr√™me", "text-red-800 dark:text-red-600 font-bold"]
            ];

            slider.addEventListener('input', () => {
                const idx = Math.min(Math.floor(slider.value / 16.7), 6);
                const wmm = forcingLevels[idx];
                valueEl.textContent = `‚âà +${wmm.toFixed(1)} W/m¬≤`;
                statusEl.textContent = statusTexts[idx][0];
                statusEl.className = `text-lg font-medium ${statusTexts[idx][1]} mt-1`;

                const percent = (slider.value / 100) * 85;
                trappedEl.style.height = `${percent}%`;
                outputVal.textContent = `‚âà ${Math.round(342 - wmm * 3.2)} W/m¬≤`;
            });
        });

        // Gestion r√©troactions
        const feedbackStates = { albedo: 0, permafrost: 0, vegetation: 0 };

        function nextFeedback(type) {
            const container = document.getElementById(`${type}-flow`);
            const steps = container.querySelectorAll('.feedback-step');
            const arrows = container.querySelectorAll('.feedback-arrow');

            if (feedbackStates[type] >= steps.length - 1) {
                resetFeedback(type);
                return;
            }

            feedbackStates[type]++;
            const current = feedbackStates[type];

            steps[current].classList.remove('hidden');
            if (current > 0) {
                arrows[current-1].classList.remove('hidden');
                steps[current].classList.add('bg-blue-50', 'dark:bg-blue-900/30', 'border-blue-300', 'dark:border-blue-700');
            }
        }

        function resetFeedback(type) {
            const container = document.getElementById(`${type}-flow`);
            const steps = container.querySelectorAll('.feedback-step');
            const arrows = container.querySelectorAll('.feedback-arrow');

            feedbackStates[type] = 0;
            steps.forEach((s, i) => {
                s.classList.remove('bg-blue-50', 'dark:bg-blue-900/30', 'border-blue-300', 'dark:border-blue-700');
                if (i > 0) s.classList.add('hidden');
            });
            arrows.forEach(a => a.classList.add('hidden'));
        }
    </script>
</body>
</html>